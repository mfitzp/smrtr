{% extends 'base.html' %}
{% load i18n %}
{% load spenglr_sq_tags %}
{% load pagination_tags %}

{% block breadcrumbs %} 
    {{ block.super }}
    &raquo; <a href="{% url network-detail network_id=concept.network.id %}">{{ concept.network }}</a>
    &raquo; {{ concept }}
{% endblock %}


{% block content %}

    <h1>{{ concept.name }}</h1>

    <table>
        <tr><th>SQ</th><td>
            {% if userconcept %}
                {% sqchange 100 userconcept.sq %}
            {% endif %}
            
            {% sqdifficulty concept.sq request.user.get_profile.sq %}
        </td></tr>
    </table>

    <blockquote>{{ concept.description }}</blockquote>

    <form method="get" action=".">
        <table>
            {{ form.as_table }}
            <tr>
                <td>&nbsp;</td>
                <td>
                    <input type="submit" value="Search">
                </td>
            </tr>
        </table>
    </form>
        {% if query %}
            <form method="post" action=".">
            <table>
            {% for result in page_obj.object_list %}
            {% with result.object as question %}
                <tr>
                    <td><input type="checkbox" name="addquestion" value="{{ question.id }}"></td>
                    <th><a href="{{ result.object.get_absolute_url }}"></th>
                    <td><a href="{% url question-detail question_id=question.id %}">{{ question.content }}</a></td>
                    <td>{% sqchange 100 question.sq %}</td>
                </tr>
            {% endwith %}
            {% empty %}
                <tr><td>No results found.</td></tr>
            {% endfor %}
            </table>
            <input type="submit" value="Add Questions">
            </form>
        {% else %}
            {# Show some example queries to run, maybe query syntax, something else? #}
        {% endif %}



{% paginate %}

{% endblock %}